{"version":3,"file":"index-CEllaBsN.esm.js","sources":["../../src/routes.ts","../../src/components/useIframeAppData.ts","../../src/plugin.ts"],"sourcesContent":["import { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'backstage-plugin-iframe',\n});\n","import { Entity } from '@backstage/catalog-model';\n\nexport const IFRAME_ARTIFACTORY_ANNOTATION_WEBSITE_URL =\n  'iframe-plugin/website-url';\n\nexport const IFRAME_ARTIFACTORY_ANNOTATION_WEBSITE_NAME =\n  'iframe-plugin/website-name';\n\nexport const useIframeAppData = ({ entity }: { entity: Entity }) => {\n  const websiteUrl =\n    entity?.metadata.annotations?.[IFRAME_ARTIFACTORY_ANNOTATION_WEBSITE_URL] ??\n    '';\n  const websiteName =\n    entity?.metadata.annotations?.[\n      IFRAME_ARTIFACTORY_ANNOTATION_WEBSITE_NAME\n    ] ?? '';\n\n  if (!websiteUrl) {\n    throw new Error(\"'iframe-plugin/website-url' annotations are missing\");\n  }\n  if (!websiteName) {\n    throw new Error(\"'iframe-plugin/website-name' annotations are missing\");\n  }\n  return { websiteUrl, websiteName };\n};\n","import {\n  createPlugin,\n  createRoutableExtension,\n} from '@backstage/core-plugin-api';\nimport { Entity } from '@backstage/catalog-model';\nimport { rootRouteRef } from './routes';\nimport {\n  IFRAME_ARTIFACTORY_ANNOTATION_WEBSITE_URL,\n  // IFRAME_ARTIFACTORY_ANNOTATION_WEBSITE_NAME,\n} from './components/useIframeAppData';\n\nexport const IframePlugin = createPlugin({\n  id: 'iframe',\n  routes: {\n    root: rootRouteRef,\n  },\n});\n\nexport const IframePage = IframePlugin.provide(\n  createRoutableExtension({\n    name: 'IframePage',\n    component: () => import('./components/IframePage').then(m => m.IframePage),\n    mountPoint: rootRouteRef,\n  }),\n);\n// Embed website in Entity\nexport const EntityIFrameContent = IframePlugin.provide(\n  createRoutableExtension({\n    name: 'EntityIFrameContent',\n    component: () =>\n      import('./components/IframeContent').then(m => m.IFrameContent),\n    mountPoint: rootRouteRef,\n  }),\n);\n\nexport const isIframeAvailable = (entity: Entity) =>\n  Boolean(\n    entity?.metadata.annotations?.[IFRAME_ARTIFACTORY_ANNOTATION_WEBSITE_URL],\n  );\n\n\n// import { useIframeAppData } from './components/useIframeAppData';\n// const { entity } = useEntity();\n// const { websiteUrl, websiteName } = useIframeAppData({entity});\n\n// export { websiteUrl, websiteName };"],"names":[],"mappings":";;AAEO,MAAM,eAAe,cAAe,CAAA;AAAA,EACzC,EAAI,EAAA,yBAAA;AACN,CAAC,CAAA;;ACFM,MAAM,yCACX,GAAA,2BAAA,CAAA;AAEK,MAAM,0CACX,GAAA,4BAAA,CAAA;AAEK,MAAM,gBAAmB,GAAA,CAAC,EAAE,MAAA,EAAiC,KAAA;AARpE,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CAAA;AASE,EAAA,MAAM,cACJ,EAAQ,GAAA,CAAA,EAAA,GAAA,MAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,MAAA,CAAA,QAAA,CAAS,WAAjB,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAA+B,+CAA/B,IACA,GAAA,EAAA,GAAA,EAAA,CAAA;AACF,EAAA,MAAM,eACJ,EAAQ,GAAA,CAAA,EAAA,GAAA,MAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,MAAA,CAAA,QAAA,CAAS,WAAjB,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CACE,gDADF,IAEK,GAAA,EAAA,GAAA,EAAA,CAAA;AAEP,EAAA,IAAI,CAAC,UAAY,EAAA;AACf,IAAM,MAAA,IAAI,MAAM,qDAAqD,CAAA,CAAA;AAAA,GACvE;AACA,EAAA,IAAI,CAAC,WAAa,EAAA;AAChB,IAAM,MAAA,IAAI,MAAM,sDAAsD,CAAA,CAAA;AAAA,GACxE;AACA,EAAO,OAAA,EAAE,YAAY,WAAY,EAAA,CAAA;AACnC;;ACbO,MAAM,eAAe,YAAa,CAAA;AAAA,EACvC,EAAI,EAAA,QAAA;AAAA,EACJ,MAAQ,EAAA;AAAA,IACN,IAAM,EAAA,YAAA;AAAA,GACR;AACF,CAAC,EAAA;AAEM,MAAM,aAAa,YAAa,CAAA,OAAA;AAAA,EACrC,uBAAwB,CAAA;AAAA,IACtB,IAAM,EAAA,YAAA;AAAA,IACN,SAAA,EAAW,MAAM,OAAO,8BAAyB,EAAE,IAAK,CAAA,CAAA,CAAA,KAAK,EAAE,UAAU,CAAA;AAAA,IACzE,UAAY,EAAA,YAAA;AAAA,GACb,CAAA;AACH,EAAA;AAEO,MAAM,sBAAsB,YAAa,CAAA,OAAA;AAAA,EAC9C,uBAAwB,CAAA;AAAA,IACtB,IAAM,EAAA,qBAAA;AAAA,IACN,SAAA,EAAW,MACT,OAAO,iCAA4B,EAAE,IAAK,CAAA,CAAA,CAAA,KAAK,EAAE,aAAa,CAAA;AAAA,IAChE,UAAY,EAAA,YAAA;AAAA,GACb,CAAA;AACH,EAAA;AAEa,MAAA,iBAAA,GAAoB,CAAC,MAAgB,KAAA;AAnClD,EAAA,IAAA,EAAA,CAAA;AAoCE,EAAA,OAAA,OAAA;AAAA,IACE,CAAA,EAAA,GAAA,MAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,MAAA,CAAQ,QAAS,CAAA,WAAA,KAAjB,IAA+B,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,yCAAA,CAAA;AAAA,GACjC,CAAA;AAAA;;;;"}